<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to WorkVivo Chat Favorites</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 18px;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .welcome-message {
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-message h2 {
            font-size: 24px;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .welcome-message p {
            font-size: 16px;
            color: #6b7280;
            line-height: 1.6;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .feature {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .feature-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .feature h3 {
            font-size: 18px;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .feature p {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.5;
        }

        .steps {
            background: #e3f2fd;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .steps h3 {
            font-size: 20px;
            color: #1565c0;
            margin-bottom: 20px;
            text-align: center;
        }

        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
            padding: 12px;
            background: white;
            border-radius: 8px;
        }

        .step:last-child {
            margin-bottom: 0;
        }

        .step-number {
            background: #007bff;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 16px;
            flex-shrink: 0;
        }

        .step-content h4 {
            font-size: 16px;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .step-content p {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.5;
        }

        .hotkeys {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .hotkeys h3 {
            font-size: 18px;
            color: #856404;
            margin-bottom: 16px;
            text-align: center;
        }

        .hotkey {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px;
            background: white;
            border-radius: 6px;
        }

        .hotkey:last-child {
            margin-bottom: 0;
        }

        .hotkey-combo {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 4px 8px;
            font-family: monospace;
            font-weight: 600;
            margin-right: 12px;
            min-width: 120px;
            text-align: center;
        }

        .cta {
            text-align: center;
            padding: 24px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .cta h3 {
            font-size: 20px;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #6c757d;
            margin-left: 12px;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #6b7280;
            font-size: 14px;
        }

        /* Animation styles */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìå Welcome to WorkVivo Chat Favorites</h1>
            <p>Your favorite conversations, just one click away</p>
        </div>

        <div class="content">
            <div class="welcome-message">
                <h2>üéâ Installation Successful!</h2>
                <p>WorkVivo Chat Favorites <span id="version-number"></span> is now ready to transform your chat experience. Pin your most important conversations and access them instantly with enhanced search capabilities.</p>
            </div>

            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; padding: 24px; margin-bottom: 32px; border: 2px solid #f59e0b;">
                <h3 style="margin: 0 0 12px 0; color: #78350f; font-size: 20px;">‚ú® What's New in <span id="version-number-2"></span></h3>
                <ul style="margin: 0; padding-left: 24px; color: #78350f; line-height: 1.8;">
                    <li><strong>üí¨ Custom Status Updates:</strong> Let your team know what you're up to! Set custom status with emoji and text, with optional expiry times (30m, 1h, 4h, today, this week, or never)</li>
                    <li><strong>üëÅÔ∏è Status Visibility:</strong> Your status appears in the sidebar next to your avatar and in chat headers when others message you</li>
                    <li><strong>‚è∞ Auto-Expiry:</strong> Status automatically clears at the scheduled time - no manual cleanup needed</li>
                    <li><strong>üéØ Easy Updates:</strong> Click your avatar anytime to change or clear your status</li>
                </ul>
            </div>

            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üìå</div>
                    <h3>Pin Any Chat</h3>
                    <p>Hover over chat avatars to pin your favorite conversations - stays synced across sessions</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">üí¨</div>
                    <h3>Custom Status Updates</h3>
                    <p>Set your status with custom emoji and text - click your avatar in sidebar to update your status with optional expiry</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">üîç</div>
                    <h3>Smart Search</h3>
                    <p>Lightning-fast search with Smart Database - finds people instantly with zero API calls</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">@</div>
                    <h3>Mentions Tracking</h3>
                    <p>Never miss when someone mentions you - see all @mentions across chats in one panel</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">‚úçÔ∏è</div>
                    <h3>Draft Messages</h3>
                    <p>Auto-save drafts with ADAS recovery - never lose unfinished messages with 60s undo</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">üíæ</div>
                    <h3>Smart Caching</h3>
                    <p>IndexedDB-powered user database learns from your searches for instant results</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">üîé</div>
                    <h3>Message Search</h3>
                    <p>Search messages within channels with advanced operators - find important info fast</p>
                </div>

                <div class="feature">
                    <div class="feature-icon">üé®</div>
                    <h3>Customize Everything</h3>
                    <p>Personalize with custom button colors, layouts, status messages, and flexible feature toggles</p>
                </div>
            </div>

            <div class="hotkeys">
                <h3>‚å®Ô∏è Keyboard Shortcuts (<span id="version-number-3"></span>)</h3>

                <div class="hotkey">
                    <div class="hotkey-combo platform-specific" data-mac="‚åò + /" data-win="Ctrl + /">‚åò/Ctrl + /</div>
                    <div><strong>Smart Search:</strong> Open the search widget to find anyone instantly - also works by double-clicking the floating button</div>
                </div>

                <div class="hotkey">
                    <div class="hotkey-combo platform-specific" data-mac="Hold ‚åò, press \\" data-win="Hold Ctrl, press \\">Hold Cmd/Ctrl + \\</div>
                    <div><strong>Recent Chat Switcher:</strong> Hold modifier key, press \ to open and cycle through recent chats, release modifier to open selected chat</div>
                </div>

                <div class="hotkey">
                    <div class="hotkey-combo">Esc</div>
                    <div><strong>Close Panels:</strong> Close any open modal (chat switcher, search widget, threads panel, or prompts)</div>
                </div>

                <div style="background: #fff3cd; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #ffeaa7;">
                    <div style="font-size: 14px; color: #856404;"><strong>üí° Pro Tips:</strong></div>
                    <div style="font-size: 13px; color: #856404; margin-top: 8px;">
                        ‚Ä¢ <strong>Pin Chats:</strong> Open any chat, hover over the avatar in the chat header, click the pin icon<br>
                        ‚Ä¢ <strong>Reorder Pinned:</strong> Drag avatars in the sidebar's pinned section to rearrange<br>
                        ‚Ä¢ <strong>Floating Button:</strong> Single-click for recent chats modal, double-click for instant search<br>
                        ‚Ä¢ <strong>Threads Panel:</strong> Click the Threads icon in chat header to view all threads<br>
                        ‚Ä¢ <strong>Windows Users:</strong> Default is Ctrl key - you can change to Alt or Both in settings
                    </div>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; padding: 32px; margin-bottom: 32px; border: 2px solid #f59e0b;">
                <h3 style="margin: 0 0 20px 0; color: #78350f; font-size: 22px; text-align: center;">üí¨ Custom Status Updates - Let People Know What You're Up To</h3>

                <div style="margin-bottom: 24px;">
                    <p style="color: #78350f; line-height: 1.8; margin-bottom: 16px;">
                        Set your custom status to let your colleagues know what you're working on, when you'll be back, or if you're busy. Your status appears in the sidebar next to your avatar and in chat headers when others message you.
                    </p>
                </div>

                <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="margin: 0 0 12px 0; color: #78350f; font-size: 18px;">üìñ How to Set Your Status:</h4>

                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #f59e0b; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">1</div>
                            <div>
                                <strong style="color: #78350f;">Click your avatar in the sidebar</strong>
                                <p style="margin: 4px 0 0 0; color: #78350f; font-size: 14px;">Look for your profile picture at the top of the left sidebar</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #f59e0b; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">2</div>
                            <div>
                                <strong style="color: #78350f;">Choose an emoji and write your status</strong>
                                <p style="margin: 4px 0 0 0; color: #78350f; font-size: 14px;">Pick an emoji that represents your status and type a custom message (e.g., "üèñÔ∏è On vacation")</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #f59e0b; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">3</div>
                            <div>
                                <strong style="color: #78350f;">Set an expiry time (optional)</strong>
                                <p style="margin: 4px 0 0 0; color: #78350f; font-size: 14px;">Choose when your status should automatically clear: 30m, 1h, 4h, Today, This week, or Never</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start;">
                            <div style="background: #f59e0b; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">4</div>
                            <div>
                                <strong style="color: #78350f;">Click "Set Status"</strong>
                                <p style="margin: 4px 0 0 0; color: #78350f; font-size: 14px;">Your status will appear in the sidebar and in chat headers when others view your conversations</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 8px; padding: 20px;">
                    <h4 style="margin: 0 0 12px 0; color: #78350f; font-size: 18px;">‚ú® Status Features:</h4>

                    <ul style="margin: 0; padding-left: 24px; color: #78350f; line-height: 1.8;">
                        <li><strong>Custom Emoji & Text:</strong> Choose any emoji and write your own custom message</li>
                        <li><strong>Flexible Expiry:</strong> Set your status to auto-clear after 30 minutes, 1 hour, 4 hours, today, this week, or never</li>
                        <li><strong>Visible in Sidebar:</strong> Your status shows next to your avatar in the sidebar for quick reference</li>
                        <li><strong>Chat Header Display:</strong> Others see your status when they open a conversation with you</li>
                        <li><strong>Auto-Expiry:</strong> Status automatically clears at the scheduled time - no manual cleanup needed</li>
                        <li><strong>Easy Updates:</strong> Click your avatar anytime to change or clear your status</li>
                    </ul>
                </div>

                <div style="background: #fef3c7; border: 1px solid #fbbf24; border-radius: 8px; padding: 16px; margin-top: 16px;">
                    <div style="font-size: 14px; color: #78350f;">
                        <strong>üí° Pro Tip:</strong> Use status updates to let your team know when you're in meetings, working focused, on break, or available for quick questions. It helps reduce interruptions and sets clear expectations!
                    </div>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; padding: 32px; margin-bottom: 32px; border: 2px solid #0ea5e9;">
                <h3 style="margin: 0 0 20px 0; color: #0c4a6e; font-size: 22px; text-align: center;">üí¨ Thread Panel - Stay on Top of Conversations</h3>

                <div style="margin-bottom: 24px;">
                    <p style="color: #0c4a6e; line-height: 1.8; margin-bottom: 16px;">
                        The Thread Panel gives you a complete overview of all threads in any chat. See unread counts, jump to specific threads, and never miss important replies.
                    </p>
                </div>

                <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                    <h4 style="margin: 0 0 12px 0; color: #0c4a6e; font-size: 18px;">üìñ How to Use Threads:</h4>

                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #0ea5e9; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">1</div>
                            <div>
                                <strong style="color: #0c4a6e;">Open a chat conversation</strong>
                                <p style="margin: 4px 0 0 0; color: #475569; font-size: 14px;">Navigate to any direct message or group chat</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #0ea5e9; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">2</div>
                            <div>
                                <strong style="color: #0c4a6e;">Look for the Threads button</strong>
                                <p style="margin: 4px 0 0 0; color: #475569; font-size: 14px;">Find the "üí¨ Threads" button in the chat header (top right area)</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                            <div style="background: #0ea5e9; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">3</div>
                            <div>
                                <strong style="color: #0c4a6e;">Click to open the Thread Panel</strong>
                                <p style="margin: 4px 0 0 0; color: #475569; font-size: 14px;">A side panel will slide in showing all threads for this chat</p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start;">
                            <div style="background: #0ea5e9; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 12px; flex-shrink: 0; font-size: 14px;">4</div>
                            <div>
                                <strong style="color: #0c4a6e;">Navigate threads easily</strong>
                                <p style="margin: 4px 0 0 0; color: #475569; font-size: 14px;">Click any thread to jump directly to it - unread badges show new replies</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 8px; padding: 20px;">
                    <h4 style="margin: 0 0 12px 0; color: #0c4a6e; font-size: 18px;">‚ú® Thread Panel Features:</h4>

                    <ul style="margin: 0; padding-left: 24px; color: #475569; line-height: 1.8;">
                        <li><strong>Real-time Updates:</strong> Thread list updates automatically via WebSocket - no refresh needed</li>
                        <li><strong>Unread Badges:</strong> See at a glance which threads have new replies you haven't read</li>
                        <li><strong>Smart Navigation:</strong> Click any thread to instantly jump to it in the conversation</li>
                        <li><strong>Thread Previews:</strong> See the original message that started each thread</li>
                        <li><strong>Sort & Filter:</strong> Organize threads by most recent or by unread status</li>
                        <li><strong>Load More:</strong> Automatically loads older threads as you scroll</li>
                    </ul>
                </div>

                <div style="background: #fef3c7; border: 1px solid #fbbf24; border-radius: 8px; padding: 16px; margin-top: 16px;">
                    <div style="font-size: 14px; color: #78350f;">
                        <strong>üí° Pro Tip:</strong> The Threads button only appears for chats that have existing threads. If you don't see the button, the chat doesn't have any threaded conversations yet.
                    </div>
                </div>
            </div>

            <div class="steps">
                <h3>üöÄ Get Started in 3 Easy Steps</h3>

                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Go to WorkVivo Chat</h4>
                        <p>Navigate to your WorkVivo chat page (the extension only works on chat pages for security)</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Pin Your First Chat</h4>
                        <p>Open any conversation and hover over the chat avatar in the header. Click the pin icon (üìç) that appears</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Enjoy Quick Access</h4>
                        <p>Your pinned chat now appears in the "Pinned" section at the top of your sidebar. Try the hotkeys for even faster navigation!</p>
                    </div>
                </div>
            </div>

            <div class="cta">
                <h3>Ready to boost your productivity?</h3>
                <p style="color: #6b7280; margin-top: 8px;">Navigate to WorkVivo Chat to start using the extension!</p>
            </div>

            <!-- Privacy & Analytics Notice -->
            <div id="privacyNotice" class="privacy-notice" style="margin-top: 32px; padding: 20px; background: #f8f9fa; border-radius: 12px; border: 1px solid #e9ecef;">
                <h3 style="margin: 0 0 12px 0; font-size: 18px; color: #1f2937;">üîí Privacy & Analytics</h3>

                <div id="jurisdictionMessage" style="margin-bottom: 16px;">
                    <p style="margin: 0 0 8px 0; color: #374151; line-height: 1.6; font-size: 14px;">
                        <strong>Detecting your location...</strong>
                    </p>
                </div>

                <div id="analyticsInfo" style="display: none;">
                    <!-- Content will be populated by JavaScript -->
                </div>

                <p style="margin: 12px 0 0 0; font-size: 13px; color: #6b7280;">
                    <strong>Your privacy matters:</strong> All analytics are anonymous. No personal data or chat content is ever collected.
                    You can change these settings anytime in the extension options.
                    <a href="https://j6.studio/workvivo-chat-favorites-extension/privacy-policy.html" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: none; margin-left: 8px;">Privacy Policy ‚Üí</a>
                </p>
            </div>
        </div>

        <div class="footer">
            <div style="margin-bottom: 12px;">
                WorkVivo Chat Favorites <span id="version-number-4"></span> ‚Ä¢ Smart Database for instant search ‚Ä¢ Developed by j6 ‚Ä¢ Thanks for installing!
            </div>
            <div>
                <a href="https://buymeacoffee.com/j6workz" target="_blank" style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #FFDD00; color: #000000; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; transition: transform 0.2s ease;">
                    <span>‚òï</span>
                    <span>Buy me a coffee</span>
                </a>
            </div>
        </div>
    </div>

    <script src="modules/utils/JurisdictionDetector.js"></script>
    <script src="modules/analytics/ConsentManager.js"></script>
    <script src="welcome.js"></script>

</body>
</html>